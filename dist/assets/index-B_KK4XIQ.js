import{g as _,u as F,r as O,R as h,l as E,a as q}from"./index-DyW3mgp5.js";var v={exports:{}},P,g;function M(){if(g)return P;g=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return P=e,P}var m,j;function W(){if(j)return m;j=1;var e=M();function r(){}function t(){}return t.resetWarningCache=r,m=function(){function o(p,s,u,l,d,T){if(T!==e){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}o.isRequired=o;function a(){return o}var i={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:a,element:o,elementType:o,instanceOf:a,node:o,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:r};return i.PropTypes=i,i},m}var S;function L(){return S||(S=1,v.exports=W()()),v.exports}var n=L(),b,R;function A(){return R||(R=1,b=function e(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var o,a,i;if(Array.isArray(r)){if(o=r.length,o!=t.length)return!1;for(a=o;a--!==0;)if(!e(r[a],t[a]))return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===t.toString();if(i=Object.keys(r),o=i.length,o!==Object.keys(t).length)return!1;for(a=o;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[a]))return!1;for(a=o;a--!==0;){var p=i[a];if(!e(r[p],t[p]))return!1}return!0}return r!==r&&t!==t}),b}var I=A();const D=_(I);function y(e){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},y(e)}function C(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,o)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?C(Object(t),!0).forEach(function(o){N(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function N(e,r,t){return(r=k(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function k(e){var r=V(e,"string");return y(r)=="symbol"?r:r+""}function V(e,r){if(y(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var o=t.call(e,r);if(y(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var c={onEdited:"draw:edited",onDrawStart:"draw:drawstart",onDrawStop:"draw:drawstop",onDrawVertex:"draw:drawvertex",onEditStart:"draw:editstart",onEditMove:"draw:editmove",onEditResize:"draw:editresize",onEditVertex:"draw:editvertex",onEditStop:"draw:editstop",onDeleted:"draw:deleted",onDeleteStart:"draw:deletestart",onDeleteStop:"draw:deletestop"};function z(e){var r=F(),t=O.useRef(),o=O.useRef(e),a=function(p){var s=e.onCreated,u=r.layerContainer||r.map;u.addLayer(p.layer),s&&s(p)};return h.useEffect(function(){var i=r.map,p=e.onMounted;for(var s in c)i.on(c[s],function(u){var l=Object.keys(c).filter(function(T){return c[T]===u.type});if(l.length===1){var d=l[0];e[d]&&e[d](u)}});return i.on(E.Draw.Event.CREATED,a),t.current=x(e,r),i.addControl(t.current),p&&p(t.current),function(){i.off(E.Draw.Event.CREATED,a);for(var u in c)e[u]&&i.off(c[u],e[u]);t.current.remove(i)}},[e.onCreated,e.onDeleted,e.onEdited]),h.useEffect(function(){if(!(D(e.draw,o.current.draw)&&D(e.edit,o.current.edit)&&e.position===o.current.position)){var i=r.map;t.current.remove(i),t.current=x(e,r),t.current.addTo(i);var p=e.onMounted;return p&&p(t.current),function(){t.current.remove(i)}}},[e.draw,e.edit,e.position,e.onCreated,e.onDeleted,e.onEdited]),null}function x(e,r){var t=r.layerContainer,o=e.draw,a=e.edit,i=e.position,p={edit:f(f({},a),{},{featureGroup:t})};return o&&(p.draw=f({},o)),i&&(p.position=i),new q.Control.Draw(p)}z.propTypes=f(f({},Object.keys(c).reduce(function(e,r){return e[r]=n.PropTypes.func,e},{})),{},{onCreated:n.PropTypes.func,onMounted:n.PropTypes.func,draw:n.PropTypes.shape({polyline:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.bool]),polygon:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.bool]),rectangle:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.bool]),circle:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.bool]),marker:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.bool])}),edit:n.PropTypes.shape({edit:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.bool]),remove:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.bool]),poly:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.bool]),allowIntersection:n.PropTypes.bool}),position:n.PropTypes.oneOf(["topright","topleft","bottomright","bottomleft"]),leaflet:n.PropTypes.shape({map:n.PropTypes.instanceOf(q.Map),layerContainer:n.PropTypes.shape({addLayer:n.PropTypes.func.isRequired,removeLayer:n.PropTypes.func.isRequired})})});export{z as EditControl};
